<section class="wrap">
  @if (isOffline) {
    <div class="offline-message">
      You are currently offline. Showing cached data if available.
    </div>
  }

  @if (loading) {
    <div>Loading...</div>
  }

  @if (error) {
    <div class="error">{{ error }}</div>
  }

  @if (vm) {
    <button class="btn-back" type="button" (click)="goBack()">
      ‚Üê Back
    </button>

    <header class="hdr">
      <div class="left">
        <h1 class="title">{{ vm.name }}</h1>

        <div class="meta">
          <span class="date">
            {{ vm.date | date : 'medium' }}
          </span>

          <span
            class="launch-status"
            [class.is-ok]="vm.success === true"
          >
            @if (vm.success === true) {
              Success
            } @else if (vm.success === false) {
              Failure
            } @else {
              Unknown
            }
          </span>
        </div>

        <div class="meta" *ngIf="vm.rocketName">
          Rocket: {{ vm.rocketName }}
        </div>

        <div class="meta" *ngIf="vm.launchpadName">
          Launchpad: {{ vm.launchpadName }}
        </div>
      </div>

      @if (vm.patch) {
        <div class="patch">
          <img [src]="vm.patch" alt="mission patch" />
        </div>
      }
    </header>

    @if (vm.details) {
      <section class="details">
        <h3>Details</h3>
        <p>{{ vm.details }}</p>
      </section>
    }

    <section class="links" *ngIf="vm.article || vm.webcast">
      <h3>Links</h3>
      <div class="link-buttons">
        <a
          *ngIf="vm.article"
          [href]="vm.article"
          target="_blank"
          rel="noopener"
          class="btn-link"
        >
          Article
        </a>
        <a
          *ngIf="vm.webcast"
          [href]="vm.webcast"
          target="_blank"
          rel="noopener"
          class="btn-link"
        >
          Webcast
        </a>
      </div>
    </section>

    @if (vm.images?.length) {
      <div class="gallery">
        @for (img of vm.images; track img) {
          <a [href]="img" target="_blank" rel="noopener">
            <img [src]="img" alt="photo" />
          </a>
        }
      </div>
    }
  }
</section>
